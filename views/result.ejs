<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Result</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body class="quiz-result">
  <div class="container">
    <div class="title-bar">
      <h1 class="blue-text">ğŸ‰ Well done, <%= result.username %>!</h1>
      <button id="darkToggle">ğŸŒ™ Dark Mode</button>
<a href="/profile"><button>ğŸ‘¤ My Profile</button></a>

    </div>

    <p class="blue-text">Your score: <strong><%= result.score %> / <%= result.total %></strong></p>
    <p class="Used-time">ğŸ•’ Submitted at: <%= result.timestamp %></p>
      <h3>ğŸ“¢ Share Your Score</h3>

<div class="share-buttons">
  <a class="btn btn-facebook"
     href="https://www.facebook.com/sharer/sharer.php?u=https://quiz-api-login.onrender.com"
     target="_blank">Share on Facebook</a>

  <a class="btn btn-twitter"
     href="https://twitter.com/intent/tweet?text=<%= encodeURIComponent(`I scored ${result.score} / ${result.total} on the Quiz App! Play now â†’ https://quiz-api-login.onrender.com`) %>"
     target="_blank">Share on Twitter</a>

  <a class="btn btn-whatsapp"
     href="https://api.whatsapp.com/send?text=<%= encodeURIComponent(`I just scored ${result.score}/${result.total} on the Quiz App! ğŸš€ Try it: https://quiz-api-login.onrender.com`) %>"
     target="_blank">Share on WhatsApp</a>

  <button onclick="copyShareLink()">ğŸ“‹ Copy Score</button>
</div>

<script>
  function copyShareLink() {
    const text = `I scored <%= result.score %> out of <%= result.total %> on the Quiz App! ğŸš€`;
    navigator.clipboard.writeText(text).then(() => {
      alert("Score copied to clipboard!");
    });
  }
</script>

    <% if (history && history.length > 0) { %>
      <h2 class="blue-text">ğŸ“Š Score History</h2>
      <ul class="score-history">
        <% history.slice(-5).reverse().forEach(h => { %>
          <li class="score-entry"><strong><%= h.timestamp %></strong> â€” <%= h.username %>: <%= h.score %> / <%= h.total %></li>
        <% }) %>
      </ul>
    <% } %>

    <div class="result-buttons">
      <a href="/" class="nextBtn">ğŸ” Retake Quiz</a>
      <a href="/leaderboard" class="nextBtn">ğŸ† View Leaderboard</a>
      <a href="/login" class="nextBtn">ğŸ“„ Exit(log out)</a>
    </div>
  </div>

  <script src="/script.js" defer></script>
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      setupDarkMode();
    });
  </script>
</body>
</html>
